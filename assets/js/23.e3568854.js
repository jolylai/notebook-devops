(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{197:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"服务器脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务器脚本","aria-hidden":"true"}},[s._v("#")]),s._v(" 服务器脚本")]),s._v(" "),a("p",[s._v("服务器上创建 "),a("code",[s._v("*.sh")]),s._v(" 的文件")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cd")]),s._v(" /root/HappyLittleStack "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" \\\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" \\\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" \\\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" run build "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" \\\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cd")]),s._v(" /root/HappyLittleStack/public "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" \\\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("zip")]),s._v(" -r /root/HappyLittleStack/public/dist.zip "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" \\\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" -r /root/HappyLittleStack/public/dist.zip /var/www/happy-little-stack "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" \\\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" -o -d /var/www/happy-little-stack /var/www/happy-little-stack/dist.zip\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("div",{staticClass:"tip custom-block"},[a("p",[s._v("cd 的路径需要绝对路径，不然或出现路径不对的问题")])]),s._v(" "),a("p",[s._v("用 travis 执行服务器上的 "),a("code",[s._v("*.sh")]),s._v(" 文件")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("div",{staticClass:"highlighted"},[s._v(" ")]),a("br")]),a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("after_deploy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" chmod 600 ~/.ssh/id_rsa\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(' ssh root@"$HOST" '),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("o StrictHostKeyChecking=no 'sudo /root/deploy/happyLittleStack.sh'\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])},[],!1,null,null,null);t.default=e.exports}}]);